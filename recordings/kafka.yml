groups:
  - name: kafka_recording
    rules:
    - record: kafka_consumergroup_current_offset:scraptime
      expr: timestamp(min(kafka_consumergroup_current_offset{consumergroup="barito-group"}) by (app_group, instance))
    - record: kafka_topic_partition_current_offset:per_app_group_topic
      expr: avg by (app_group, topic) ( sum by (app_group, topic, instance) ( kafka_topic_partition_current_offset{topic!="__consumer_offsets"} ) )  
